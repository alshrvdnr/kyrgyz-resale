<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Кыргызстан Подарки</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="app">
      <!-- ГЛАВНАЯ СТРАНИЦА -->
      <section id="page-home" class="page">
        <header class="main-header">
          <div class="search-row">
            <div class="search-bar">
              <i class="fa fa-search"></i>
              <input
                type="text"
                id="main-search"
                placeholder="Я ищу..."
                onkeypress="handleSearch(event)"
              />
            </div>
            <!-- Цвет фильтра теперь розовый, как и всё остальное -->
            <button class="filter-pink-btn" onclick="showPage('filter')">
              Фильтр
            </button>
          </div>

          <div class="category-row">
            <div class="cat-chip active" onclick="filterByCat('Все', this)">
              Все
            </div>
            <div class="cat-chip" onclick="filterByCat('flowers', this)">
              Цветы
            </div>
            <div class="cat-chip" onclick="filterByCat('jewelry', this)">
              Ювелирка
            </div>
            <div class="cat-chip" onclick="filterByCat('gifts', this)">
              Подарки
            </div>
            <div class="cat-chip" onclick="filterByCat('certs', this)">
              Сертификаты
            </div>
          </div>
        </header>

        <!-- КАПСУЛЬНЫЕ ТАБЫ (КАК НА ТВОЕМ СКРИНШОТЕ) -->
        <div id="home-tabs-wrapper">
          <div class="capsule-container">
            <div class="capsule-tabs">
              <div class="cap-tab active" onclick="switchMainTab('rec', this)">
                Рекомендуемые
              </div>
              <div class="cap-tab" onclick="switchMainTab('new', this)">
                Новые
              </div>
            </div>
          </div>
        </div>

        <div id="search-error" class="error-container hidden">
          <p>По такому запросу ничего не найдено</p>
        </div>

        <main class="listings-grid" id="home-grid"></main>
      </section>

      <!-- ИЗБРАННОЕ -->
      <section id="page-favs" class="page hidden">
        <header class="page-header-simple">
          <div class="header-line">
            <h2>Избранное</h2>
            <button class="clear-btn" onclick="clearFavs()">Удалить всё</button>
          </div>
        </header>

        <main id="favs-content-area">
          <!-- Сюда вставится либо сетка, либо пустой дизайн -->
        </main>
      </section>

      <!-- ПРОФИЛЬ -->
      <section id="page-profile" class="page hidden">
        <div class="profile-hero">
          <div class="avatar-circle" id="u-avatar">?</div>
          <h2 id="u-name">Загрузка...</h2>
        </div>
        <div class="profile-tabs-nav">
          <div class="p-tab active" onclick="switchProfileTab('active', this)">
            Активно
          </div>
          <div class="p-tab" onclick="switchProfileTab('sold', this)">
            Проданные / Удаленные
          </div>
        </div>
        <main class="listings-grid" id="my-ads-grid"></main>
      </section>

      <!-- ПОДАТЬ ОБЪЯВЛЕНИЕ -->
      <section id="page-add" class="page hidden">
        <header class="page-header-simple">
          <button onclick="showPage('home')" class="icon-btn">✕</button>
          <h2>Новое объявление</h2>
          <span></span>
        </header>
        <div class="form-scroll">
          <div class="f-group">
            <label>Фотография товара</label>
            <div
              class="upload-zone"
              onclick="document.getElementById('file-input').click()"
            >
              <i class="fa fa-camera"></i>
              <span id="file-label">Нажмите для выбора фото</span>
              <input
                type="file"
                id="file-input"
                accept="image/*"
                hidden
                onchange="handleFileSelect(this)"
              />
            </div>
            <div id="preview-box" class="hidden">
              <img id="img-preview" src="" />
            </div>
          </div>

          <div class="f-group">
            <label>Telegram ник (без @)</label
            ><input
              type="text"
              id="in-tg"
              class="main-input"
              placeholder="username"
            />
          </div>
          <div class="f-group">
            <label>Номер телефона</label
            ><input
              type="tel"
              id="in-phone"
              class="main-input"
              placeholder="996..."
            />
          </div>
          <div class="f-group">
            <label>Название</label
            ><input
              type="text"
              id="in-title"
              class="main-input"
              placeholder="Напр: Sony PS5"
            />
          </div>
          <div class="f-group">
            <label>Цена (KGS)</label
            ><input
              type="number"
              id="in-price"
              class="main-input"
              placeholder="0"
            />
          </div>
          <div class="f-group">
            <label>Категория</label>
            <select id="in-cat" class="main-input">
              <option value="flowers">Цветы</option>
              <option value="jewelry">Ювелирка</option>
              <option value="gifts">Подарки</option>
              <option value="certs">Сертификаты</option>
            </select>
          </div>
          <div class="f-group">
            <label>Описание</label
            ><textarea
              id="in-desc"
              class="main-input"
              placeholder="Описание..."
            ></textarea>
          </div>

          <button class="pink-btn-full" onclick="publishAndSend()">
            Опубликовать
          </button>
        </div>
      </section>

      <!-- ФИЛЬТР -->
      <section id="page-filter" class="page hidden">
        <header class="page-header-simple">
          <button onclick="showPage('home')">✕</button>
          <h2>Фильтр</h2>
          <button class="pink-txt-link" onclick="resetFilters()">
            Очистить
          </button>
        </header>
        <div class="form-body">
          <div class="f-group">
            <label>Цена</label>
            <div style="display: flex; gap: 10px">
              <input type="number" class="main-input" placeholder="От" />
              <input type="number" class="main-input" placeholder="До" />
            </div>
          </div>
          <button class="pink-btn-full" onclick="showPage('home')">
            Показать
          </button>
        </div>
      </section>

      <!-- КАРТОЧКА ТОВАРА (SONY PS5 STYLE) -->
      <div id="product-modal" class="full-view hidden">
        <div class="pv-header">
          <button class="pv-back" onclick="closeProduct()">
            <i class="fa fa-chevron-left"></i>
          </button>
          <div class="pv-top-icons">
            <i class="fa fa-share-nodes"></i> <i class="far fa-heart"></i>
            <i class="fa fa-ellipsis-v"></i>
          </div>
        </div>
        <div id="pv-content"></div>
      </div>

      <!-- НАВИГАЦИЯ -->
      <nav class="bottom-nav">
        <button class="nav-item active" onclick="showPage('home')" id="n-home">
          <i class="fa fa-home"></i><span>Главная</span>
        </button>
        <div class="nav-center">
          <button class="pink-plus" onclick="showPage('add')">+</button>
          <p>Подать</p>
        </div>
        <button class="nav-item" onclick="showPage('favs')" id="n-favs">
          <i class="fa fa-heart"></i><span>Избранное</span>
        </button>
        <button class="nav-item" onclick="showPage('profile')" id="n-profile">
          <i class="fa fa-user"></i><span>Профиль</span>
        </button>
      </nav>
    </div>
    <script src="app.js"></script>
  </body>
</html>
