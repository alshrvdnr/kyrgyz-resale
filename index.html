<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Кыргызстан Подарки</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="app">
      <!-- ГЛАВНАЯ СТРАНИЦА -->
      <section id="page-home" class="page">
        <header class="main-header">
          <div class="search-row">
            <div class="search-bar">
              <i class="fa fa-search"></i>
              <input
                type="text"
                id="main-search"
                placeholder="Ищу подарки..."
                onkeypress="handleSearch(event)"
              />
            </div>
          </div>
          <div class="category-row">
            <div class="cat-chip active" onclick="filterByCat('Все', this)">
              Все
            </div>
            <div class="cat-chip" onclick="filterByCat('flowers', this)">
              Цветы
            </div>
            <div class="cat-chip" onclick="filterByCat('jewelry', this)">
              Ювелирка
            </div>
            <div class="cat-chip" onclick="filterByCat('gifts', this)">
              Подарки
            </div>
            <div class="cat-chip" onclick="filterByCat('certs', this)">
              Сертификаты
            </div>
          </div>
        </header>

        <div id="home-tabs-wrapper">
          <div class="feed-tabs">
            <div class="feed-tab active" onclick="void(0)">Рекомендуемые</div>
            <div class="feed-tab" onclick="void(0)">Новые</div>
          </div>
        </div>

        <div id="search-error" class="error-container hidden">
          <p>По такому запросу ничего не найдено</p>
        </div>

        <main class="listings-grid" id="home-grid"></main>
      </section>

      <!-- ИЗБРАННОЕ -->
      <section id="page-favs" class="page hidden">
        <header class="simple-header">
          <div class="header-line">
            <h2>Избранное</h2>
            <button class="clear-btn" onclick="clearFavs()">Удалить всё</button>
          </div>
          <div class="fav-sub-tabs">
            <div class="f-tab active">Объявления</div>
            <div class="f-tab">Поиски</div>
          </div>
        </header>
        <main class="listings-grid" id="favs-grid"></main>
      </section>

      <!-- ПРОФИЛЬ -->
      <section id="page-profile" class="page hidden">
        <div class="profile-hero">
          <div class="profile-avatar" id="u-avatar">?</div>
          <h2 id="u-name">Никнейм</h2>
        </div>
        <div class="profile-tabs">
          <div class="p-tab active" onclick="switchProfileTab('active', this)">
            Активно
          </div>
          <div class="p-tab" onclick="switchProfileTab('sold', this)">
            Проданные / Удаленные
          </div>
        </div>
        <main class="listings-grid" id="my-ads-grid"></main>
      </section>

      <!-- ПОДАТЬ ОБЪЯВЛЕНИЕ -->
      <section id="page-add" class="page hidden">
        <header class="simple-header">
          <button onclick="showPage('home')" class="icon-btn">✕</button>
          <h2>Новое объявление</h2>
          <span></span>
        </header>
        <div class="form-scroll">
          <div class="f-group">
            <label>Фотография товара</label>
            <div
              class="upload-area"
              onclick="document.getElementById('file-input').click()"
            >
              <i class="fa fa-camera"></i>
              <span id="file-label">Нажмите для выбора фото</span>
              <input
                type="file"
                id="file-input"
                accept="image/*"
                hidden
                onchange="processFile(this)"
              />
            </div>
            <div id="pre-view-box" class="hidden">
              <img id="img-pre" src="" />
            </div>
          </div>

          <div class="f-group">
            <label>Telegram ник (без @)</label>
            <input type="text" id="in-tg" placeholder="username" />
          </div>

          <div class="f-group">
            <label>Номер телефона</label>
            <input type="tel" id="in-phone" placeholder="996..." />
          </div>

          <div class="f-group">
            <label>Название</label>
            <input type="text" id="in-title" placeholder="Что продаете?" />
          </div>

          <div class="f-group">
            <label>Цена (KGS)</label>
            <input type="number" id="in-price" placeholder="0" />
          </div>

          <div class="f-group">
            <label>Категория</label>
            <select id="in-cat">
              <option value="flowers">Цветы</option>
              <option value="jewelry">Ювелирка</option>
              <option value="gifts">Подарки</option>
              <option value="certs">Сертификаты</option>
            </select>
          </div>

          <div class="f-group">
            <label>Описание</label>
            <textarea
              id="in-desc"
              placeholder="Расскажите о товаре..."
            ></textarea>
          </div>

          <button class="pink-btn-full" onclick="sendToModeration()">
            Опубликовать
          </button>
        </div>
      </section>

      <!-- ПОДРОБНОСТИ (ДИЗАЙН SONY PS5) -->
      <div id="product-modal" class="product-modal hidden">
        <div class="modal-top-bar">
          <button class="back-circle" onclick="closeProduct()">
            <i class="fa fa-chevron-left"></i>
          </button>
          <div class="top-btns">
            <i class="fa fa-share-nodes"></i>
            <i class="far fa-heart"></i>
            <i class="fa fa-ellipsis-h"></i>
          </div>
        </div>
        <div id="product-details-inner"></div>
      </div>

      <!-- НАВИГАЦИЯ -->
      <nav class="bottom-nav">
        <button class="nav-item active" onclick="showPage('home')" id="n-home">
          <i class="fa fa-home"></i><span>Главная</span>
        </button>
        <div class="nav-plus">
          <button class="big-pink-plus" onclick="showPage('add')">+</button>
          <p>Подать</p>
        </div>
        <button class="nav-item" onclick="showPage('favs')" id="n-favs">
          <i class="fa fa-heart"></i><span>Избранное</span>
        </button>
        <button class="nav-item" onclick="showPage('profile')" id="n-profile">
          <i class="fa fa-user"></i><span>Профиль</span>
        </button>
      </nav>
    </div>
    <script src="app.js"></script>
  </body>
</html>
