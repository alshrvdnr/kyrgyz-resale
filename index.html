<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Кыргызстан Перепродажа</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="app">
      <!-- ГЛАВНАЯ -->
      <section id="page-home" class="page">
        <header class="main-header">
          <div class="search-row">
            <div class="search-bar">
              <i class="fa fa-search"></i>
              <input
                type="text"
                id="main-search"
                placeholder="Я ищу..."
                onkeypress="handleSearch(event)"
              />
            </div>
            <button class="filter-txt-btn" onclick="openCategories()">
              Фильтр
            </button>
          </div>
        </header>

        <div id="home-content">
          <div class="tab-switcher-container">
            <div class="capsule-tabs">
              <div class="c-tab active" onclick="switchMainTab('rec', this)">
                Рекомендуемые
              </div>
              <div class="c-tab" onclick="switchMainTab('new', this)">
                Новые
              </div>
            </div>
          </div>

          <main class="listings-grid" id="home-grid"></main>
        </div>

        <div id="search-error" class="error-container hidden">
          <p>По такому запросу ничего не найдено</p>
        </div>
      </section>

      <!-- ИЗБРАННОЕ -->
      <section id="page-favs" class="page hidden">
        <header class="page-header-simple">
          <h2>Избранное</h2>
          <button class="text-pink-btn" onclick="clearFavs()">
            Удалить всё
          </button>
        </header>
        <main id="favs-content">
          <!-- Сюда вставится либо список, либо дизайн "Пусто" из скрина -->
        </main>
      </section>

      <!-- ПРОФИЛЬ -->
      <section id="page-profile" class="page hidden">
        <div class="profile-header-simple">
          <div class="avatar-large" id="u-avatar">?</div>
          <h2 id="u-name">Загрузка...</h2>
        </div>
        <div class="profile-tabs">
          <div class="p-tab active" onclick="switchProfileTab('active', this)">
            Активно
          </div>
          <div class="p-tab" onclick="switchProfileTab('sold', this)">
            Проданные / Удаленные
          </div>
        </div>
        <main class="listings-grid" id="my-ads-grid"></main>
      </section>

      <!-- ПОДАТЬ ОБЪЯВЛЕНИЕ -->
      <section id="page-add" class="page hidden">
        <header class="page-header-simple">
          <button onclick="showPage('home')" class="icon-btn">✕</button>
          <h2>Новое объявление</h2>
          <span></span>
        </header>
        <div class="form-body">
          <div
            class="upload-box"
            onclick="document.getElementById('file-in').click()"
          >
            <i class="fa fa-camera"></i>
            <span id="file-label">Загрузить фото</span>
            <input
              type="file"
              id="file-in"
              accept="image/*"
              hidden
              onchange="handleFile(this)"
            />
          </div>
          <div id="img-preview-wrap" class="hidden">
            <img id="img-preview" src="" />
          </div>

          <input
            type="text"
            id="in-tg"
            class="main-input"
            placeholder="Telegram никнейм канала (без @)"
          />
          <input
            type="tel"
            id="in-phone"
            class="main-input"
            placeholder="Номер телефона"
          />
          <input
            type="text"
            id="in-title"
            class="main-input"
            placeholder="Название товара"
          />
          <input
            type="number"
            id="in-price"
            class="main-input"
            placeholder="Цена (KGS)"
          />
          <select id="in-cat" class="main-input">
            <option value="Транспорт">Транспорт</option>
            <option value="Недвижимость">Недвижимость</option>
            <option value="Услуги">Услуги</option>
            <option value="Электроника">Электроника</option>
          </select>
          <textarea
            id="in-desc"
            class="main-input"
            placeholder="Описание..."
          ></textarea>

          <button class="publish-btn" onclick="publishWithModeration()">
            Опубликовать
          </button>
        </div>
      </section>

      <!-- ОКНО КАТЕГОРИЙ (ИЗ СКРИНШОТА) -->
      <div id="cat-modal" class="full-modal hidden">
        <header class="modal-head">
          <button onclick="closeCategories()">✕</button>
          <h3>Категории</h3>
          <span></span>
        </header>
        <div class="cat-list" id="cat-list-items">
          <!-- Категории как на скрине -->
        </div>
      </div>

      <!-- ДЕТАЛИ ОБЪЯВЛЕНИЯ -->
      <div id="product-modal" class="full-view hidden">
        <div class="pv-header">
          <button onclick="closeProduct()">
            <i class="fa fa-chevron-left"></i>
          </button>
          <div class="pv-actions">
            <i class="far fa-heart"></i> <i class="fa fa-share-nodes"></i>
          </div>
        </div>
        <div id="pv-content"></div>
        <div class="pv-footer" id="pv-footer"></div>
      </div>

      <!-- НАВИГАЦИЯ -->
      <nav class="bottom-nav">
        <button class="nav-item active" onclick="showPage('home')" id="n-home">
          <i class="fa fa-home"></i><span>Главная</span>
        </button>
        <button class="nav-item" onclick="showPage('favs')" id="n-favs">
          <i class="fa fa-heart"></i><span>Избранное</span>
        </button>
        <div class="nav-center">
          <button class="add-btn" onclick="showPage('add')">+</button>
        </div>
        <button class="nav-item">
          <i class="fa fa-comment"></i><span>Чаты</span>
        </button>
        <button class="nav-item" onclick="showPage('profile')" id="n-profile">
          <i class="fa fa-user"></i><span>Профиль</span>
        </button>
      </nav>
    </div>
    <script src="app.js"></script>
  </body>
</html>
