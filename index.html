<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Кыргызстан Подарки</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="app">
      <!-- ГЛАВНАЯ -->
      <section id="page-home" class="page">
        <header class="main-header">
          <div class="top-location-bar" onclick="showCitySelector()">
            <div class="location-text">
              <i
                class="fa-solid fa-location-dot"
                style="color: var(--yellow-main)"
              ></i>
              <span id="current-city-label">Бишкек</span>
              <i
                class="fa-solid fa-chevron-down"
                style="font-size: 10px; margin-left: 5px"
              ></i>
            </div>
          </div>

          <div class="search-profile-row">
            <div class="search-wrapper">
              <i class="fa fa-search" style="color: var(--gray)"></i>
              <input
                type="text"
                id="main-search"
                placeholder="Поиск подарков..."
              />
            </div>
            <div
              class="user-avatar-circle"
              id="u-avatar-top"
              onclick="showPage('profile')"
            >
              ?
            </div>
          </div>

          <div class="categories-container">
            <div class="cat-card active" onclick="filterByCat('Все', this)">
              <i class="fa-solid fa-border-all"></i><span>Все</span>
            </div>
            <div class="cat-card" onclick="filterByCat('flowers', this)">
              <i class="fa-solid fa-leaf"></i><span>Цветы</span>
            </div>
            <div class="cat-card" onclick="filterByCat('gifts', this)">
              <i class="fa-solid fa-gift"></i><span>Подарки</span>
            </div>
            <div class="cat-card" onclick="filterByCat('jewelry', this)">
              <i class="fa-solid fa-ring"></i><span>Ювелирка</span>
            </div>
            <div class="cat-card" onclick="filterByCat('certs', this)">
              <i class="fa-solid fa-ticket"></i><span>Сертификаты</span>
            </div>
          </div>
        </header>

        <div id="home-content-area">
          <h2
            class="section-title-main"
            id="dynamic-feed-title"
            style="padding-left: 15px; font-size: 18px"
          >
            Свежие предложения
          </h2>
          <main class="listings-grid" id="home-grid"></main>
        </div>
      </section>

      <!-- ГОРОДА -->
      <div
        id="city-selector-overlay"
        class="city-overlay hidden"
        onclick="hideCitySelector()"
      >
        <div class="city-modal" onclick="event.stopPropagation()">
          <h3>Выберите город</h3>
          <div class="city-option" onclick="selectCity('Бишкек')">Бишкек</div>
          <div class="city-option" onclick="selectCity('Ош')">Ош</div>
          <div class="city-option" onclick="selectCity('Манас')">Манас</div>
          <div class="city-option" onclick="selectCity('Токмок')">Токмок</div>
          <div class="city-option" onclick="selectCity('Каракол')">Каракол</div>
        </div>
      </div>

      <!-- ИЗБРАННОЕ -->
      <section id="page-favs" class="page hidden">
        <header class="favs-header-custom">
          <div class="favs-top-line">
            <h2 style="margin: 0">Избранное</h2>
            <button class="favs-clear-btn" onclick="clearFavs()">
              Очистить
            </button>
          </div>
          <div class="favs-header-line"></div>
        </header>
        <main id="favs-content-area"></main>
      </section>

      <!-- ПРОФИЛЬ -->
      <section id="page-profile" class="page hidden">
        <header style="padding: 15px">
          <button class="close-circle-btn-new" onclick="showPage('home')">
            <i class="fa fa-arrow-left"></i>
          </button>
        </header>
        <div style="text-align: center; padding: 20px">
          <div
            class="user-avatar-circle"
            id="u-avatar-big"
            style="width: 80px; height: 80px; margin: 0 auto; font-size: 30px"
          >
            ?
          </div>
          <h2 id="u-name">Имя</h2>
        </div>
        <main class="listings-grid" id="my-ads-grid"></main>
      </section>

      <!-- ПОДАТЬ -->
      <section id="page-add" class="page hidden">
        <header
          style="
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
          "
        >
          <button onclick="cancelAdd()" class="close-circle-btn-new">
            <i class="fa fa-times"></i>
          </button>
          <h2 style="margin: 0; font-size: 18px">Новое объявление</h2>
          <div style="width: 45px"></div>
        </header>
        <div class="form-body-padded">
          <!-- Тарифы -->
          <div class="tariff-container-split">
            <div
              class="tariff-card-half tariff-std active"
              id="tariff-std"
              onclick="selectTariff('standard')"
            >
              <div class="tariff-title">Стандарт</div>
              <div class="tariff-price">Бесплатно</div>
            </div>
            <div
              class="tariff-card-half tariff-vip"
              id="tariff-vip"
              onclick="selectTariff('vip')"
            >
              <div class="tariff-title">VIP</div>
              <div class="tariff-price">100 сом</div>
            </div>
          </div>

          <div id="vip-block" class="hidden">
            <!-- Блок оплаты VIP -->
            <div
              class="info-block"
              style="border: 1px solid var(--yellow-main); text-align: center"
            >
              <p>Размещение в ТОПе на 3 дня</p>
              <img
                src="https://i.ibb.co/v487YmS6/photo-2025-02-18-19-14-11.jpg"
                style="width: 150px; margin: 10px 0"
              />
              <button
                class="yellow-btn-full"
                onclick="document.getElementById('receipt-input').click()"
                id="receipt-label"
              >
                Добавить чек
              </button>
              <input
                type="file"
                id="receipt-input"
                hidden
                onchange="handleReceiptSelect(this)"
              />
            </div>
          </div>

          <div class="f-group">
            <label>Фотографии</label>
            <div
              class="main-input"
              onclick="document.getElementById('file-input').click()"
              style="text-align: center; cursor: pointer"
            >
              <i class="fa fa-camera"></i> Выбрать фото
              <input
                type="file"
                id="file-input"
                multiple
                hidden
                onchange="handleFileSelect(this)"
              />
            </div>
            <div
              id="gallery-preview"
              style="
                display: flex;
                gap: 5px;
                margin-top: 10px;
                overflow-x: auto;
              "
            ></div>
          </div>

          <div class="f-group">
            <label>Категория</label>
            <select id="in-cat" class="main-input">
              <option value="flowers">Цветы</option>
              <option value="jewelry">Ювелирка</option>
              <option value="gifts">Подарки</option>
              <option value="certs">Сертификаты</option>
            </select>
          </div>
          <div class="f-group">
            <label>Название</label
            ><input type="text" id="in-title" class="main-input" />
          </div>
          <div class="f-group">
            <label>Цена (KGS)</label
            ><input type="number" id="in-price" class="main-input" />
          </div>
          <div class="f-group">
            <label>Город</label>
            <select id="in-city" class="main-input">
              <option value="Бишкек">Бишкек</option>
              <option value="Ош">Ош</option>
              <option value="Манас">Манас</option>
            </select>
          </div>
          <div class="f-group">
            <label>Описание</label
            ><textarea id="in-desc" class="main-input" rows="3"></textarea>
          </div>
          <div class="f-group">
            <label>Telegram (@nick)</label
            ><input type="text" id="in-tg" class="main-input" />
          </div>

          <button class="yellow-btn-full" onclick="publishAndSend()">
            Опубликовать
          </button>
        </div>
      </section>

      <!-- ТОВАР -->
      <div id="product-modal" class="full-view-page hidden">
        <div
          class="pv-header-transparent"
          style="
            position: absolute;
            top: 15px;
            left: 15px;
            z-index: 10;
            display: flex;
            justify-content: space-between;
            width: calc(100% - 30px);
          "
        >
          <button class="close-circle-btn-new" onclick="closeProduct()">
            <i class="fa fa-arrow-left"></i>
          </button>
          <div id="modal-fav-icon"></div>
        </div>
        <div id="pv-content"></div>
      </div>

      <!-- НАВИГАЦИЯ -->
      <nav class="bottom-nav">
        <button class="nav-item active" onclick="showPage('home')" id="n-home">
          <i class="fa-solid fa-house"></i><span>Главная</span>
        </button>
        <div class="nav-center">
          <button class="yellow-plus-main" onclick="showPage('add')">
            <i class="fa-solid fa-plus"></i>
          </button>
          <p>Подать</p>
        </div>
        <button class="nav-item" onclick="showPage('favs')" id="n-favs">
          <i class="fa-solid fa-heart"></i><span>Избранные</span>
        </button>
      </nav>
    </div>
    <script src="app.js"></script>
  </body>
</html>
